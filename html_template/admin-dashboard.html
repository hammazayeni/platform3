<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./assets/logo/taekwondo-sbeitla.png" type="image/png" sizes="50x50">
    <title>Admin Dashboard - Taekwondo Sbeitla</title>
    <link rel="stylesheet" href="./style.css">
    <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <symbol id="icon-taekwondo" viewBox="0 0 24 24">
                <path d="M12 2C10.9 2 10 2.9 10 4C10 5.1 10.9 6 12 6C13.1 6 14 5.1 14 4C14 2.9 13.1 2 12 2M15.9 8.1C15.5 7.7 14.8 7.7 14.4 8.1L12 10.5L9.6 8.1C9.2 7.7 8.5 7.7 8.1 8.1C7.7 8.5 7.7 9.2 8.1 9.6L10 11.5V15L8 20H10L12 16L14 20H16L14 15V11.5L15.9 9.6C16.3 9.2 16.3 8.5 15.9 8.1M6 18C6 18 4 13 4 11C4 9.9 4.9 9 6 9V18M18 18V9C19.1 9 20 9.9 20 11C20 13 18 18 18 18Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-dashboard" viewBox="0 0 24 24">
                <path d="M3 13H11V3H3M3 21H11V15H3M13 21H21V11H13M13 3V9H21V3" fill="currentColor"/>
            </symbol>
            <symbol id="icon-users" viewBox="0 0 24 24">
                <path d="M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-family" viewBox="0 0 24 24">
                <path d="M16 4C16 2.9 16.9 2 18 2S20 2.9 20 4 19.1 6 18 6 16 5.1 16 4M6 4C6 2.9 6.9 2 8 2S10 2.9 10 4 9.1 6 8 6 6 5.1 6 4M12 8C11.4 8 11 8.4 11 9V11H9V9C9 8.4 8.6 8 8 8S7 8.4 7 9V15H9V22H11V15H13V22H15V15H17V9C17 8.4 16.6 8 16 8S15 8.4 15 9V11H13V9C13 8.4 12.6 8 12 8M4 9V15H6V22H8V9H4M16 9V22H18V15H20V9H16Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-register" viewBox="0 0 24 24">
                <path d="M19 3H14.82C14.4 1.84 13.3 1 12 1S9.6 1.84 9.18 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M12 3C12.55 3 13 3.45 13 4S12.55 5 12 5 11 4.55 11 4 11.45 3 12 3M7 7H17V9H7V7M7 11H17V13H7V11M7 15H14V17H7V15Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-message" viewBox="0 0 24 24">
                <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2M20 16H6L4 18V4H20V16M7 9H17V11H7V9M7 6H17V8H7V6M7 12H14V14H7V12Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-check" viewBox="0 0 24 24">
                <path d="M21 7L9 19L3.5 13.5L4.91 12.09L9 16.17L19.59 5.59L21 7Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-calendar" viewBox="0 0 24 24">
                <path d="M19 4H18V2H16V4H8V2H6V4H5C3.89 4 3 4.9 3 6V20C3 21.1 3.89 22 5 22H19C20.1 22 21 21.1 21 20V6C21 4.9 20.1 4 19 4M19 20H5V10H19V20M19 8H5V6H19V8M7 12H12V17H7V12Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-settings" viewBox="0 0 24 24">
                <path d="M12 15.5C10.07 15.5 8.5 13.93 8.5 12S10.07 8.5 12 8.5 15.5 10.07 15.5 12 13.93 15.5 12 15.5M19.43 12.97C19.47 12.65 19.5 12.33 19.5 12S19.47 11.35 19.43 11.03L21.54 9.37C21.73 9.22 21.78 8.95 21.66 8.73L19.66 5.27C19.54 5.05 19.27 4.96 19.05 5.05L16.56 6.05C16.04 5.66 15.5 5.32 14.87 5.07L14.5 2.42C14.46 2.18 14.25 2 14 2H10C9.75 2 9.54 2.18 9.5 2.42L9.13 5.07C8.5 5.32 7.96 5.66 7.44 6.05L4.95 5.05C4.73 4.96 4.46 5.05 4.34 5.27L2.34 8.73C2.21 8.95 2.27 9.22 2.46 9.37L4.57 11.03C4.53 11.35 4.5 11.67 4.5 12S4.53 12.65 4.57 12.97L2.46 14.63C2.27 14.78 2.21 15.05 2.34 15.27L4.34 18.73C4.46 18.95 4.73 19.03 4.95 18.95L7.44 17.94C7.96 18.34 8.5 18.68 9.13 18.93L9.5 21.58C9.54 21.82 9.75 22 10 22H14C14.25 22 14.46 21.82 14.5 21.58L14.87 18.93C15.5 18.67 16.04 18.34 16.56 17.94L19.05 18.95C19.27 19.03 19.54 18.95 19.66 18.73L21.66 15.27C21.78 15.05 21.73 14.78 21.54 14.63L19.43 12.97Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-logout" viewBox="0 0 24 24">
                <path d="M16 17V14H9V10H16V7L21 12L16 17M14 2C15.1 2 16 2.9 16 4V6H14V4H5V20H14V18H16V20C16 21.1 15.1 22 14 22H5C3.9 22 3 21.1 3 20V4C3 2.9 3.9 2 5 2H14Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-refresh" viewBox="0 0 24 24">
                <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4C7.58 4 4.01 7.58 4.01 12S7.58 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C8.69 18 6 15.31 6 12S8.69 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-add" viewBox="0 0 24 24">
                <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-delete" viewBox="0 0 24 24">
                <path d="M19 4H15.5L14.5 3H9.5L8.5 4H5V6H19M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-star" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-online" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="8" fill="currentColor"/>
            </symbol>
            <symbol id="icon-announcement" viewBox="0 0 24 24">
                <path d="M12 8H4C3.45 8 3 8.45 3 9V15C3 15.55 3.45 16 4 16H5V19C5 19.55 5.45 20 6 20H8C8.55 20 9 19.55 9 19V16H12L17 18V6L12 8M21.5 12C21.5 13.71 20.54 15.26 19 16V8C20.53 8.75 21.5 10.3 21.5 12Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-book" viewBox="0 0 24 24">
                <path d="M18 2H12V9L9.5 7.5L7 9V2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V4C20 2.9 19.1 2 18 2Z" fill="currentColor"/>
            </symbol>
            <symbol id="icon-certificate" viewBox="0 0 24 24">
                <path d="M4 3C2.9 3 2 3.9 2 5V15C2 16.1 2.9 17 4 17H11V15H4V5H20V15H13V17H20C21.1 17 22 16.1 22 15V5C22 3.9 21.1 3 20 3H4M12 17L9 20V23L12 21L15 23V20L12 17Z" fill="currentColor"/>
            </symbol>
        </defs>
    </svg>
    <style>
        .btn-icon-small {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            padding: 5px;
            transition: transform 0.2s;
        }
        
        .btn-icon-small:hover {
            transform: scale(1.2);
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .schedule-day-section {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .schedule-day-header {
            margin: 0 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .schedule-class-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            margin-bottom: 10px;
            background: var(--bg-primary);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        .schedule-time {
            font-weight: bold;
            color: var(--primary-color);
            min-width: 80px;
        }
        
        .schedule-info {
            flex: 1;
        }
        
        .schedule-info h4 {
            margin: 0 0 5px 0;
        }
        
        .schedule-info p {
            margin: 0;
            font-size: 14px;
            color: var(--text-secondary);
        }
        .image-viewer-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
        }
        .image-viewer-modal.active { display: flex; }
        .image-viewer-content {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .image-viewer-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 36px;
            color: #fff;
            cursor: pointer;
        }
        .image-viewer-close:hover { opacity: 0.8; }
    </style>
</head>

<body>
    <div class="dashboard-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo bounce-animation"><img class="logo-img" src="./assets/logo/taekwondo-sbeitla.png" alt="Taekwondo Sbeitla" /></div>
                <h2>Taekwondo Sbeitla</h2>
            </div>
            
            <nav class="sidebar-nav">
                <a href="admin-dashboard.html" class="nav-item active">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-dashboard"/></svg></span>
                    <span>Dashboard</span>
                </a>
                <a href="student-management.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-users"/></svg></span>
                    <span>Students</span>
                </a>
                <a href="parent-management.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-family"/></svg></span>
                    <span>Parents</span>
                </a>
                <a href="pending-registrations.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-register"/></svg></span>
                    <span>Registrations</span>
                    <span class="message-badge" id="pendingBadge"></span>
                </a>
                <a href="messages.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-message"/></svg></span>
                    <span>Messages</span>
                    <span class="message-badge" id="sidebarMessageBadge"></span>
                </a>
                <a href="attendance.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-check"/></svg></span>
                    <span>Attendance</span>
                </a>
                <a href="class-schedule.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-calendar"/></svg></span>
                    <span>Schedule</span>
                </a>
                <a href="settings.html" class="nav-item">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-settings"/></svg></span>
                    <span>Settings</span>
                </a>
                <a href="index.html" class="nav-item logout">
                    <span class="icon"><svg width="20" height="20"><use href="#icon-logout"/></svg></span>
                    <span>Logout</span>
                </a>
            </nav>
        </aside>
        
        <main class="main-content">
            <header class="page-header">
                <h1><svg width="24" height="24" style="margin-right:8px; vertical-align:middle;"><use href="#icon-dashboard"/></svg>Admin Dashboard</h1>
                <div class="user-info">
                    <span>Welcome, Master Admin</span>
                    <span class="online-indicator" title="You are online"><svg width="12" height="12"><use href="#icon-online"/></svg></span>
                </div>
            </header>
            
            <!-- Profile Section with Image Upload -->
            <div class="profile-section">
                <div class="profile-card">
                    <div class="profile-avatar" id="adminAvatar"><svg width="64" height="64"><use href="#icon-users"/></svg></div>
                    <div class="profile-info">
                        <h2 id="adminName">Master Admin</h2>
                        <p class="belt-rank">Administrator</p>
                        <button class="btn btn-small btn-secondary" id="uploadProfileImage" style="margin-top: 10px;">
                            <svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Upload Profile Image
                        </button>
                        <input type="file" id="profileImageInput" accept="image/png, image/jpeg, image/jpg" style="display: none;">
                    </div>
                </div>
            </div>
            
            <!-- Online Users Widget -->
            <div class="online-users-widget">
                <div class="online-users-header">
                    <h3><svg width="14" height="14"><use href="#icon-online"/></svg> Online Users</h3>
                    <span class="online-count" id="onlineCount">0</span>
                </div>
                <div class="online-users-list" id="onlineUsersList">
                    <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No users online</p>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin: 10px 0;">
                <button class="btn btn-secondary" id="refreshDashboard"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-refresh"/></svg>Refresh</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><svg width="28" height="28"><use href="#icon-users"/></svg></div>
                    <div class="stat-info">
                        <h3>Total Students</h3>
                        <p class="stat-value" id="totalStudents">45</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><svg width="28" height="28"><use href="#icon-family"/></svg></div>
                    <div class="stat-info">
                        <h3>Total Parents</h3>
                        <p class="stat-value" id="totalParents">0</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><svg width="28" height="28"><use href="#icon-register"/></svg></div>
                    <div class="stat-info">
                        <h3>Pending Registrations</h3>
                        <p class="stat-value" id="pendingRegistrations">0</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><svg width="28" height="28"><use href="#icon-check"/></svg></div>
                    <div class="stat-info">
                        <h3>Attendance Rate</h3>
                        <p class="stat-value" id="attendanceRate">92%</p>
                    </div>
                </div>
            </div>

            <!-- Daily Classes Management -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-calendar"/></svg>Daily Classes Management</h2>
                    <button class="btn btn-primary" id="toggleDailyClassForm"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Add Daily Class</button>
                </div>
                <div class="card-body" id="dailyClassFormContainer" style="display: none;">
                    <form class="announcement-form" id="dailyClassForm">
                        <h3 id="dailyClassFormTitle" style="margin-bottom: 20px;">Add Daily Class</h3>
                        <input type="hidden" id="dailyClassId">
                        
                        <div class="form-group">
                            <label for="dailyClassName">Class Name *</label>
                            <input type="text" id="dailyClassName" placeholder="e.g., Beginner Class" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dailyClassTime">Time *</label>
                            <input type="time" id="dailyClassTime" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dailyClassDate">Date *</label>
                            <input type="date" id="dailyClassDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dailyClassBeltLevels">Belt Levels *</label>
                            <input type="text" id="dailyClassBeltLevels" placeholder="e.g., White & Yellow Belts" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dailyClassStudentCount">Student Count *</label>
                            <input type="number" id="dailyClassStudentCount" min="0" placeholder="e.g., 15" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="dailyClassInstructor">Instructor (Optional)</label>
                            <input type="text" id="dailyClassInstructor" placeholder="e.g., Master Kim">
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelDailyClass">Cancel</button>
                            <button type="submit" class="btn btn-success"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Save Class</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Weekly Schedule Management -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-calendar"/></svg>Weekly Schedule Management</h2>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-primary" id="toggleWeeklyScheduleForm"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Add Schedule Entry</button>
                        <button class="btn btn-danger" id="clearWeeklySchedule"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-delete"/></svg>Clear Weekly Schedule</button>
                    </div>
                </div>
                <div class="card-body" id="weeklyScheduleFormContainer" style="display: none;">
                    <form class="announcement-form" id="weeklyScheduleForm">
                        <h3 id="weeklyScheduleFormTitle" style="margin-bottom: 20px;">Add Weekly Schedule Entry</h3>
                        <input type="hidden" id="weeklyScheduleId">
                        
                        <div class="form-group">
                            <label for="weeklyScheduleDay">Day *</label>
                            <select id="weeklyScheduleDay" required>
                                <option value="">Select Day</option>
                                <option value="Monday">Monday</option>
                                <option value="Tuesday">Tuesday</option>
                                <option value="Wednesday">Wednesday</option>
                                <option value="Thursday">Thursday</option>
                                <option value="Friday">Friday</option>
                                <option value="Saturday">Saturday</option>
                                <option value="Sunday">Sunday</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="weeklyScheduleTime">Time *</label>
                            <input type="time" id="weeklyScheduleTime" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="weeklyScheduleClassName">Class Name *</label>
                            <input type="text" id="weeklyScheduleClassName" placeholder="e.g., Advanced Sparring" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="weeklyScheduleBeltLevels">Belt Levels *</label>
                            <input type="text" id="weeklyScheduleBeltLevels" placeholder="e.g., Red & Black Belts" required>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelWeeklySchedule">Cancel</button>
                            <button type="submit" class="btn btn-success">ðŸ’¾ Save Entry</button>
                        </div>
                    </form>
                </div>
                <div class="card-body">
                    <h3 style="margin-bottom: 15px;">Current Weekly Schedule</h3>
                    <div id="weeklyScheduleContainer">
                        <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No weekly schedule set</p>
                    </div>
                </div>
            </div>
            
            <!-- Announcements Section with Delete -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-announcement"/></svg>Post Announcement</h2>
                    <button class="btn btn-primary" id="toggleAnnouncementForm"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>New Announcement</button>
                </div>
                <div class="card-body" id="announcementFormContainer" style="display: none;">
                    <form class="announcement-form" id="announcementForm">
                        <div class="form-group">
                            <label for="announcementTitle">Announcement Title *</label>
                            <input type="text" id="announcementTitle" placeholder="Enter announcement title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="announcementDescription">Description *</label>
                            <textarea id="announcementDescription" rows="4" placeholder="Describe the event or announcement..." required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="announcementImage">Upload Image (PNG, JPG) - Admin Only</label>
                            <input type="file" id="announcementImage" accept="image/png, image/jpeg, image/jpg">
                            <img id="imagePreview" class="image-preview" alt="Preview">
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelAnnouncement">Cancel</button>
                            <button type="submit" class="btn btn-success"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-announcement"/></svg>Post Announcement</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Posted Announcements with Delete -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-announcement"/></svg>Posted Announcements</h2>
                </div>
                <div class="card-body" id="postedAnnouncementsList">
                    <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No announcements posted yet</p>
                </div>
            </div>

            <!-- Training Materials Management -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-book"/></svg>Training Materials Management</h2>
                    <button class="btn btn-primary" id="toggleMaterialForm"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Upload Material</button>
                </div>
                <div class="card-body" id="materialFormContainer" style="display: none;">
                    <form class="announcement-form" id="materialForm">
                        <div class="form-group">
                            <label for="materialTitle">Material Title *</label>
                            <input type="text" id="materialTitle" placeholder="Enter material title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="materialDescription">Description *</label>
                            <textarea id="materialDescription" rows="3" placeholder="Describe the training material..." required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="materialType">Material Type *</label>
                            <select id="materialType" required>
                                <option value="">Select Type</option>
                                <option value="video">Video Tutorial</option>
                                <option value="pdf">PDF Document</option>
                                <option value="guide">Training Guide</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="materialFile">Upload File (PDF, Video, etc.) *</label>
                            <input type="file" id="materialFile" accept=".pdf,.mp4,.mov,.avi,.doc,.docx" required>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelMaterial">Cancel</button>
                            <button type="submit" class="btn btn-success"><svg width="16" height="16" style="margin-right:6px;"><use href="#icon-add"/></svg>Upload Material</button>
                        </div>
                    </form>
                </div>
                <div class="card-body">
                    <h3 style="margin-bottom: 15px;">Uploaded Materials</h3>
                    <div id="uploadedMaterialsList">
                        <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No materials uploaded yet</p>
                    </div>
                </div>
            </div>

            <!-- Certificate Management -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-certificate"/></svg>Certificate Management</h2>
                    <button class="btn btn-primary" id="toggleCertificateForm">âž• Upload Certificate</button>
                </div>
                <div class="card-body" id="certificateFormContainer" style="display: none;">
                    <form class="announcement-form" id="certificateForm">
                        <div class="form-group">
                            <label for="certificateStudent">Select Student *</label>
                            <select id="certificateStudent" required>
                                <option value="">Select a student</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="certificateTitle">Certificate Title *</label>
                            <input type="text" id="certificateTitle" placeholder="e.g., Yellow Belt Certificate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="certificateFile">Upload Certificate (PDF, Image) *</label>
                            <input type="file" id="certificateFile" accept=".pdf,image/*" required>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelCertificate">Cancel</button>
                            <button type="submit" class="btn btn-success">ðŸ“¤ Upload Certificate</button>
                        </div>
                    </form>
                </div>
                <div class="card-body">
                    <h3 style="margin-bottom: 15px;">Uploaded Certificates</h3>
                    <div id="uploadedCertificatesList">
                        <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No certificates uploaded yet</p>
                    </div>
                </div>
            </div>

            <!-- Schedule Management - ENHANCED WITH EDIT -->
            <div class="card">
                <div class="card-header">
                    <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-calendar"/></svg>Schedule Management</h2>
                    <button class="btn btn-primary" id="toggleScheduleForm">âž• Upload Schedule</button>
                </div>
                <div class="card-body" id="scheduleFormContainer" style="display: none;">
                    <form class="announcement-form" id="scheduleForm">
                        <h3 id="scheduleFormTitle" style="margin-bottom: 20px;">Upload New Schedule</h3>
                        
                        <div class="form-group">
                            <label for="scheduleTitle">Schedule Title *</label>
                            <input type="text" id="scheduleTitle" placeholder="e.g., Weekly Class Schedule" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="scheduleDescription">Description *</label>
                            <textarea id="scheduleDescription" rows="3" placeholder="Describe the schedule..." required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="scheduleFile">Upload Schedule File (PDF, Image)</label>
                            <input type="file" id="scheduleFile" accept=".pdf,image/*">
                            <small style="color: var(--text-secondary); font-size: 12px; display: block; margin-top: 5px;">
                                When editing, leave empty to keep the existing file
                            </small>
                        </div>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" id="cancelSchedule">Cancel</button>
                            <button type="submit" class="btn btn-success">ðŸ’¾ Save Schedule</button>
                        </div>
                    </form>
                </div>
                <div class="card-body">
                    <h3 style="margin-bottom: 15px;">Uploaded Schedules</h3>
                    <div id="uploadedSchedulesList">
                        <p style="text-align: center; color: var(--text-secondary); padding: 20px;">No schedules uploaded yet</p>
                    </div>
                </div>
            </div>
            
            <div class="content-grid">
                <div class="card">
                    <div class="card-header">
                        <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-dashboard"/></svg>Recent Activity</h2>
                        <button class="btn btn-small btn-secondary" onclick="addCustomActivity()">âž• Add Activity</button>
                    </div>
                    <div class="card-body">
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <span class="activity-icon"><svg width="20" height="20"><use href="#icon-dashboard"/></svg></span>
                                <div class="activity-content">
                                    <p style="color: var(--text-secondary);">No recent activities</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h2><svg width="18" height="18" style="margin-right:6px;"><use href="#icon-calendar"/></svg>Upcoming Classes Today</h2>
                    </div>
                    <div class="card-body">
                        <div class="class-list" id="upcomingClasses">
                            <div class="class-item">
                                <div class="class-info">
                                    <p style="text-align: center; color: var(--text-secondary);">No classes scheduled for today</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="./activity-manager.js"></script>
    <script src="./class-manager.js"></script>
    <script type="module" src="./script.js"></script>
    <script type="module" src="./online-status.js"></script>
    <script type="module" src="./messages.js"></script>
    <script src="./admin-functions-enhanced.js"></script>
    <script src="./sponsors.js"></script>
    <script>
      (function(){
        var toggle = function(el){
          if(!el) return;
          var open = el.classList.contains('is-open') || el.style.display === 'block';
          el.classList.toggle('is-open', !open);
          el.classList.toggle('hidden', open);
          if (!open) { try { el.scrollIntoView({behavior:'smooth', block:'start'}); } catch(_){} }
        };
        var bind = function(btnId, containerId, extra){
          var b = document.getElementById(btnId);
          var c = document.getElementById(containerId);
          if(!b || !c) return;
          c.classList.add('hidden');
          b.addEventListener('click', function(){
            toggle(c);
            if (typeof extra === 'function') extra();
          });
        };
        bind('toggleAnnouncementForm','announcementFormContainer');
        bind('toggleMaterialForm','materialFormContainer');
        bind('toggleCertificateForm','certificateFormContainer', function(){
          if (typeof loadStudentsForCertificate === 'function') loadStudentsForCertificate();
        });
        bind('toggleScheduleForm','scheduleFormContainer');
        bind('toggleWeeklyScheduleForm','weeklyScheduleFormContainer');
        bind('toggleDailyClassForm','dailyClassFormContainer');
      })();
    </script>
    <!-- Image Viewer Modal -->
    <div id="imageViewerModal" class="image-viewer-modal">
        <span class="image-viewer-close" onclick="closeImageViewer()">&times;</span>
        <img id="imageViewerContent" class="image-viewer-content" alt="Full size image">
    </div>
    <script>
      window.openImageViewer = function(imageSrc) {
        const modal = document.getElementById('imageViewerModal');
        const img = document.getElementById('imageViewerContent');
        if (!modal || !img) return;
        modal.classList.add('active');
        img.src = imageSrc;
      };
      window.closeImageViewer = function() {
        const modal = document.getElementById('imageViewerModal');
        if (!modal) return;
        modal.classList.remove('active');
      };
      document.getElementById('imageViewerModal')?.addEventListener('click', function(e){
        if (e.target === this) { closeImageViewer(); }
      });
    </script>
  </body>

</html>
